# XXTCloudControl Frontend

- [WebRTC 分辨率策略说明](./WEBRTC_RESOLUTION.md)

这是一个基于 **SolidJS** 构建的现代化云端控制器前端，为 XXTouch 提供强大的远程管理能力。

## 🌟 主要功能

### 📱 设备管理
- **实时监控**: 实时查看所有已连接设备的状态（在线/离线、屏幕方向、正在运行的任务等）。
- **批量控制**: 支持对选定设备进行批量操作，如启动/停止脚本、重载界面 (Respring) 等。
- **分组管理**: 灵活的设备分组功能，支持将设备分配到不同组别并进行分组控制。
- **自动发现**: 实时自动更新连接的设备列表。

### 🕹️ 远程控制 (WebRTC & Real-time)
- **极速画面**: 基于 WebRTC 的高性能远程画面传输，支持多种分辨率策略适配及动态码率。
- **全方位操控**: 支持触摸模拟、物理按键模拟（Home, 锁屏, 音量等）、文本输入。
- **屏幕旋转**: 支持 0°, 90°, 180°, 270° 四方向屏幕旋转。
- **剪贴板同步**: 支持与设备互通剪贴板，支持读取和写入多种 UTI 类型。

### 📂 文件浏览器 (双端管理)
- **设备文件浏览器**: 完整的设备端文件系统访问，支持文件/文件夹的创建、删除、重命名、移动、复制。
- **云端文件浏览器**: 服务器端文件仓库管理，用于存储脚本 (scripts)、全局配置 (files) 和报告 (reports)。
- **智能传输**:
  - **小文件**: 通过 WebSocket 极速同步。
  - **大文件**: 自动切换至 HTTP 分片传输，支持进度显示。
  - **跨端拉取**: 直接将设备文件拉取到云端仓库，或从云端下发到设备。

### 📜 脚本运行
- **脚本选择**: 方便地选择已上传到云端的脚本并在指定设备上运行。
- **动态表单**: 支持脚本配置项的动态表单渲染 (`FormRunner`)，无需硬编码即可配置脚本参数。

## 🛠️ 技术栈

- **框架**: [SolidJS](https://www.solidjs.com/) - 声明式、高效的原生响应式前端框架。
- **构建工具**: [Vite](https://vitejs.dev/) - 极速的前端构建与开发体验。
- **语言**: [TypeScript](https://www.typescriptlang.org/) - 类型安全，增强开发可靠性。
- **通信**: WebSocket (实时双向通信) + RESTful API (大文件传输与认证)。
- **样式**: CSS Modules + Vanilla CSS (极致性能与隔离)。
- **实时控制**: WebRTC (低延迟视频流)。

## 🚀 快速开始

### 1. 安装依赖

```bash
npm install
```

### 2. 启动开发服务器

```bash
npm run dev
```

本地开发服务器通常在 http://localhost:3000 运行。

### 3. 连接与登录

1. 在浏览器打开应用。
2. 输入 XXTouch 服务器的 **IP 地址**、**端口号** (默认 8080) 和 **访问密码**。
3. 应用会自动保存连接信息（密码经过 Hash 处理）以便下次快速访问。

### 4. 生产构建

```bash
npm run build
```

构建结果将输出到 `dist` 目录。

## 📂 项目结构

```bash
frontend/
├── public/              # 静态资源
├── src/
│   ├── components/      # UI 组件 (设备列表, 控制界面, 文件浏览器, 弹窗等)
│   ├── hooks/           # 自定义 Hooks
│   ├── services/        # 核心逻辑 (WebSocket, AuthService, WebRTCService 等)
│   ├── utils/           # 工具函数 (文件处理, Base64 转换等)
│   ├── App.tsx          # 应用根组件 (全局事件处理, 状态初始化)
│   └── index.tsx        # 入口文件
├── vite.config.ts       # Vite 配置
└── tsconfig.json        # TypeScript 配置
```

## 🛡️ 浏览器支持

支持所有现代浏览器：
- Chrome 88+
- Firefox 87+
- Safari 14+
- Edge 88+

## 📄 许可证

MIT License
